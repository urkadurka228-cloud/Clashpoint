<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Clashpoint</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-user-select: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        body {
            background: linear-gradient(135deg, #0a0008 0%, #1a0015 50%, #2a0020 100%);
            color: #fff;
            font-family: 'Arial Black', sans-serif;
            overflow: hidden;
            height: 100vh;
        }

        /* –ú–ï–ù–Æ */
        #gameMenu {
            position: absolute;
            width: 100%;
            height: 100%;
            background: rgba(10, 0, 8, 0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            gap: 12px;
        }

        .gameTitle {
            position: absolute;
            top: 30px;
            font-size: 48px;
            font-weight: bold;
            background: linear-gradient(45deg, #ff1493, #ff69b4, #9b30ff, #00ff88);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(255, 20, 147, 0.5);
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .gameBtn {
            width: 270px;
            height: 50px;
            background: linear-gradient(145deg, #1a0015, #2a0020);
            border: 3px solid;
            border-radius: 12px;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .gameBtn:nth-child(2) { border-color: #ff1493; }
        .gameBtn:nth-child(3) { border-color: #9b30ff; }
        .gameBtn:nth-child(4) { border-color: #00ff88; }
        .gameBtn:nth-child(5) { border-color: #ffaa00; }
        .gameBtn:nth-child(6) { border-color: #00e5ff; }

        .gameBtn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }

        .menuSettingsBtn {
            position: absolute;
            bottom: 25px;
            width: 40px;
            height: 40px;
            background: #1a0015;
            border: 2px solid #ff1493;
            border-radius: 10px;
            color: #ff69b4;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .menuSettingsBtn:hover {
            background: #2a0020;
            transform: scale(1.1);
        }

        /* –ò–ì–†–´ */
        .gameContainer {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0a0008 0%, #1a0015 100%);
            display: none;
        }

        .backBtn {
            position: absolute;
            top: 15px;
            left: 15px;
            width: 45px;
            height: 45px;
            background: linear-gradient(145deg, #ff1493, #c71585);
            border-radius: 50%;
            color: white;
            border: none;
            font-size: 22px;
            z-index: 1000;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            box-shadow: 0 3px 10px rgba(255, 20, 147, 0.3);
        }

        .backBtn:hover {
            background: linear-gradient(145deg, #c71585, #a01070);
            transform: scale(1.1);
        }

        .gameSettingsBtn {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 45px;
            height: 45px;
            background: #1a0015;
            border: 2px solid #ff1493;
            border-radius: 10px;
            color: #ff69b4;
            font-size: 22px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .gameSettingsBtn:hover {
            background: #2a0020;
        }

        .stats {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(26, 0, 21, 0.8);
            padding: 10px 20px;
            border-radius: 12px;
            border: 2px solid;
            font-size: 18px;
            color: white;
            display: flex;
            gap: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        #aimTrainer .stats { border-color: #ff1493; }
        #tracking .stats { border-color: #9b30ff; }
        #reaction .stats { border-color: #00ff88; }
        #trajectory .stats { border-color: #ffaa00; }
        #gymnastics .stats { border-color: #00e5ff; }

        .highScore {
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .timer {
            position: absolute;
            bottom: 25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 28px;
            color: white;
            font-weight: bold;
            background: rgba(26, 0, 21, 0.8);
            padding: 12px 28px;
            border-radius: 12px;
            border: 2px solid;
            backdrop-filter: blur(10px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        #aimTrainer .timer { border-color: #ff1493; }
        #tracking .timer { border-color: #9b30ff; }
        #reaction .timer { border-color: #00ff88; }
        #trajectory .timer { border-color: #ffaa00; }
        #gymnastics .timer { border-color: #00e5ff; }

        /* –ò–ì–†–ê 1: –ü–†–ò–¶–ï–õ */
        .target {
            position: absolute;
            width: 55px;
            height: 55px;
            background: radial-gradient(circle, #ff1493 40%, #c71585 100%);
            border-radius: 50%;
            border: 3px solid #ffb6c1;
            box-shadow: 0 0 25px rgba(255, 20, 147, 0.8);
            cursor: crosshair;
            transition: all 0.2s;
        }

        .target:hover {
            transform: scale(1.15);
            box-shadow: 0 0 35px rgba(255, 20, 147, 1);
        }

        /* –ò–ì–†–ê 2: –¢–†–ï–ö–ò–ù–ì */
        .trackingCircle {
            position: absolute;
            width: 50px;
            height: 50px;
            background: radial-gradient(circle, #9b30ff 50%, #7a20cc 100%);
            border-radius: 50%;
            border: 3px solid #d8b3ff;
            box-shadow: 0 0 25px rgba(155, 48, 255, 0.8);
            transition: left 0.1s, top 0.1s;
        }

        .trackingCursor {
            position: absolute;
            width: 20px;
            height: 20px;
            border: 2px solid #00ff88;
            border-radius: 50%;
            pointer-events: none;
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.7);
            background: rgba(0, 255, 136, 0.2);
            z-index: 10;
        }

        /* –ò–ì–†–ê 3: –†–ï–ê–ö–¶–ò–Ø */
        .reactionDot {
            position: absolute;
            width: 75px;
            height: 75px;
            background: radial-gradient(circle, #1a0015 40%, #0a0008 100%);
            border: 4px solid #00ff88;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            transform: translate(-50%, -50%);
        }

        .reactionDot.active {
            background: radial-gradient(circle, #00ff88 40%, #00cc66 100%);
            border-color: #b3ffd8;
            box-shadow: 0 0 40px rgba(0, 255, 136, 0.9);
            transform: translate(-50%, -50%) scale(1.2);
        }

        .reactionDot:hover:not(.active) {
            border-color: #00cc66;
        }

        /* –ò–ì–†–ê 4: –¢–†–ê–ï–ö–¢–û–†–ò–Ø */
        .trajectoryCircle {
            position: absolute;
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, #ffaa00 40%, #cc8800 100%);
            border-radius: 50%;
            border: 3px solid #ffd699;
            box-shadow: 0 0 30px rgba(255, 170, 0, 0.8);
            cursor: pointer;
            z-index: 5;
            transition: transform 0.1s;
        }

        .trajectoryCircle:hover {
            transform: scale(1.1);
        }

        .trajectoryCursor {
            position: absolute;
            width: 25px;
            height: 25px;
            border: 2px solid #00bfff;
            border-radius: 50%;
            pointer-events: none;
            box-shadow: 0 0 20px rgba(0, 191, 255, 0.7);
            background: rgba(0, 191, 255, 0.2);
            z-index: 10;
        }

        .trajectoryLine {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            opacity: 0.3;
        }

        .trajectoryHint {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: rgba(255, 170, 0, 0.5);
            font-size: 16px;
            text-align: center;
            pointer-events: none;
            z-index: 2;
            transition: opacity 0.5s;
        }

        /* –ò–ì–†–ê 5: –ì–ò–ú–ù–ê–°–¢–ò–ö–ê –î–õ–Ø –ì–õ–ê–ó */
        .eyeTarget {
            position: absolute;
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, #00e5ff 40%, #00b8cc 100%);
            border-radius: 50%;
            border: 4px solid #b3f0ff;
            box-shadow: 0 0 40px rgba(0, 229, 255, 0.9);
            z-index: 5;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            cursor: pointer;
        }

        .eyeTarget:before {
            content: '';
            width: 30px;
            height: 30px;
            background: radial-gradient(circle, #ffffff 60%, #e6f7ff 100%);
            border-radius: 50%;
            border: 2px solid #80e1ff;
        }

        .eyeTarget.active {
            animation: eyeBlink 0.3s ease;
            transform: scale(1.2);
            box-shadow: 0 0 60px rgba(0, 229, 255, 1);
        }

        @keyframes eyeBlink {
            0%, 100% { transform: scale(1.2); }
            50% { transform: scale(0.9); }
        }

        .eyeInstruction {
            position: absolute;
            top: 120px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(0, 229, 255, 0.8);
            font-size: 16px;
            text-align: center;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px 20px;
            border-radius: 10px;
            z-index: 2;
            max-width: 80%;
        }

        .eyeProgress {
            position: absolute;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            height: 10px;
            background: rgba(26, 0, 21, 0.5);
            border-radius: 5px;
            overflow: hidden;
            border: 1px solid #00e5ff;
        }

        .eyeProgressFill {
            height: 100%;
            background: linear-gradient(90deg, #00e5ff, #0099cc);
            width: 0%;
            transition: width 0.3s;
            border-radius: 5px;
        }

        .eyeProgressText {
            position: absolute;
            top: 95px;
            left: 50%;
            transform: translateX(-50%);
            color: #00e5ff;
            font-size: 14px;
            text-shadow: 0 0 10px rgba(0, 229, 255, 0.5);
        }

        .breathingCircle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 150px;
            height: 150px;
            background: radial-gradient(circle, rgba(0, 229, 255, 0.2) 30%, transparent 70%);
            border: 3px solid rgba(0, 229, 255, 0.3);
            border-radius: 50%;
            z-index: 1;
            animation: breathe 4s ease-in-out infinite;
        }

        @keyframes breathe {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.3; }
            50% { transform: translate(-50%, -50%) scale(1.3); opacity: 0.6; }
        }

        /* –ù–ê–°–¢–†–û–ô–ö–ò */
        #settingsMenu {
            position: absolute;
            width: 100%;
            height: 100%;
            background: rgba(10, 0, 8, 0.98);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .settingsTitle {
            position: absolute;
            top: 30px;
            font-size: 28px;
            color: #ff1493;
            text-shadow: 0 0 20px rgba(255, 20, 147, 0.5);
        }

        .settingsItem {
            width: 280px;
            padding: 16px;
            margin: 10px;
            background: linear-gradient(145deg, #1a0015, #2a0020);
            border: 2px solid #ff1493;
            border-radius: 12px;
            color: #ffb6c1;
            font-size: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .settingsItem:hover {
            background: linear-gradient(145deg, #2a0020, #3a0030);
            transform: scale(1.05);
            border-color: #ff69b4;
        }

        .closeSettings {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 45px;
            height: 45px;
            background: linear-gradient(145deg, #ff1493, #c71585);
            border-radius: 50%;
            color: white;
            border: none;
            font-size: 22px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 3px 10px rgba(255, 20, 147, 0.3);
        }

        .closeSettings:hover {
            background: linear-gradient(145deg, #c71585, #a01070);
            transform: scale(1.1);
        }

        /* –ö–û–ù–§–ò–î–ï–ù–¶–ò–ê–õ–¨–ù–û–°–¢–¨ */
        #privacyMenu {
            position: absolute;
            width: 100%;
            height: 100%;
            background: rgba(10, 0, 8, 0.98);
            display: none;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            overflow-y: auto;
            z-index: 1001;
            backdrop-filter: blur(10px);
        }

        .privacyContent {
            max-width: 90%;
            margin-top: 60px;
            color: #d8bfd8;
            font-size: 14px;
            line-height: 1.6;
            text-align: left;
            background: rgba(26, 0, 21, 0.5);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(255, 20, 147, 0.3);
        }

        .privacyTitle {
            color: #ff1493;
            font-size: 24px;
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 0 0 15px rgba(255, 20, 147, 0.5);
        }

        /* –ê–ù–ò–ú–ê–¶–ò–ò */
        @keyframes pulse {
            0% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.05); }
            100% { transform: translateX(-50%) scale(1); }
        }

        .timer.pulse {
            animation: pulse 1s infinite;
        }

        .target.clicked {
            transform: scale(0.8);
            opacity: 0.7;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes titleGlow {
            0% { text-shadow: 0 0 20px rgba(255, 20, 147, 0.5); }
            25% { text-shadow: 0 0 25px rgba(155, 48, 255, 0.6); }
            50% { text-shadow: 0 0 30px rgba(0, 255, 136, 0.5); }
            75% { text-shadow: 0 0 25px rgba(255, 170, 0, 0.6); }
            100% { text-shadow: 0 0 20px rgba(0, 229, 255, 0.5); }
        }

        .gameTitle {
            animation: titleGlow 4s infinite alternate;
        }

        /* –ü–†–û–ì–†–ï–°–° –ë–ê–† –î–õ–Ø –¢–†–ê–ï–ö–¢–û–†–ò–ò */
        .progressContainer {
            position: absolute;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            height: 10px;
            background: rgba(26, 0, 21, 0.5);
            border-radius: 5px;
            overflow: hidden;
            border: 1px solid #ffaa00;
        }

        .progressBar {
            height: 100%;
            background: linear-gradient(90deg, #ffaa00, #ff8800);
            width: 0%;
            transition: width 0.3s;
            border-radius: 5px;
        }

        .progressText {
            position: absolute;
            top: 95px;
            left: 50%;
            transform: translateX(-50%);
            color: #ffaa00;
            font-size: 14px;
            text-shadow: 0 0 10px rgba(255, 170, 0, 0.5);
        }

        /* –°–ö–û–†–û–°–¢–¨ –¢–†–ê–ï–ö–¢–û–†–ò–ò */
        .speedInfo {
            position: absolute;
            top: 120px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 170, 0, 0.8);
            font-size: 12px;
            text-align: center;
            background: rgba(0, 0, 0, 0.5);
            padding: 5px 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <!-- –ú–ï–ù–Æ -->
    <div id="gameMenu">
        <div class="gameTitle">CLASHPOINT</div>
        <div class="gameBtn" onclick="startGame('aimTrainer')">–ü–†–ò–¶–ï–õ</div>
        <div class="gameBtn" onclick="startGame('tracking')">–¢–†–ï–ö–ò–ù–ì</div>
        <div class="gameBtn" onclick="startGame('reaction')">–†–ï–ê–ö–¶–ò–Ø</div>
        <div class="gameBtn" onclick="startGame('trajectory')">–¢–†–ê–ï–ö–¢–û–†–ò–Ø</div>
        <div class="gameBtn" onclick="startGame('gymnastics')">–ì–ò–ú–ù–ê–°–¢–ò–ö–ê</div>
        <button class="menuSettingsBtn" onclick="openSettings()">‚öô</button>
    </div>

    <!-- –ù–ê–°–¢–†–û–ô–ö–ò -->
    <div id="settingsMenu">
        <button class="closeSettings" onclick="closeSettings()">‚úï</button>
        <div class="settingsTitle">–ù–ê–°–¢–†–û–ô–ö–ò</div>
        <div class="settingsItem" onclick="showInfo()">–û –ü–†–û–ï–ö–¢–ï</div>
        <div class="settingsItem" onclick="openPrivacy()">–ö–û–ù–§–ò–î–ï–ù–¶–ò–ê–õ–¨–ù–û–°–¢–¨</div>
        <div class="settingsItem" onclick="resetAll()">–°–ë–†–û–° –†–ï–ö–û–†–î–û–í</div>
        <div class="settingsItem" onclick="closeSettings()">–ó–ê–ö–†–´–¢–¨</div>
    </div>

    <!-- –ö–û–ù–§–ò–î–ï–ù–¶–ò–ê–õ–¨–ù–û–°–¢–¨ -->
    <div id="privacyMenu">
        <button class="closeSettings" onclick="closePrivacy()">‚úï</button>
        <div class="privacyTitle">–ö–û–ù–§–ò–î–ï–ù–¶–ò–ê–õ–¨–ù–û–°–¢–¨</div>
        <div class="privacyContent">
            <p><strong>–ü—Ä–æ–µ–∫—Ç Clashpoint —è–≤–ª—è–µ—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º.</strong></p>
            <br>
            <p>‚Ä¢ Clashpoint –Ω–µ –∏–º–µ–µ—Ç –Ω–∏–∫–∞–∫–æ–π —Å–≤—è–∑–∏ —Å –¥—Ä—É–≥–∏–º–∏ –∏–≥—Ä–∞–º–∏, –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –∏–ª–∏ –∫–æ–º–ø–∞–Ω–∏—è–º–∏</p>
            <p>‚Ä¢ –í—Å–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Ç–æ—Ä–≥–æ–≤—ã–µ –º–∞—Ä–∫–∏ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –∏—Ö –∑–∞–∫–æ–Ω–Ω—ã–º –≤–ª–∞–¥–µ–ª—å—Ü–∞–º</p>
            <p>‚Ä¢ –ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –≤ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã—Ö —Ü–µ–ª—è—Ö</p>
            <p>‚Ä¢ –ú—ã –Ω–µ —Å–æ–±–∏—Ä–∞–µ–º –∏ –Ω–µ —Ö—Ä–∞–Ω–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ</p>
            <p>‚Ä¢ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ</p>
            <p>‚Ä¢ –í—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</p>
            <p>‚Ä¢ –î–ª—è —Ä–∞–±–æ—Ç—ã –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É</p>
            <br>
            <p>–ü—Ä–æ–µ–∫—Ç –Ω–µ –ø—Ä–µ—Ç–µ–Ω–¥—É–µ—Ç –Ω–∞ –∫–∞–∫–∏–µ-–ª–∏–±–æ –ø—Ä–∞–≤–∞ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ —Ç—Ä–µ—Ç—å–∏—Ö –ª–∏—Ü.</p>
        </div>
    </div>

    <!-- –ò–ì–†–ê 1: –ü–†–ò–¶–ï–õ -->
    <div id="aimTrainer" class="gameContainer">
        <button class="backBtn" onclick="backToMenu()">‚Üê</button>
        <button class="gameSettingsBtn" onclick="openSettings()">‚öô</button>
        <div class="stats">
            <span>–û–ß–ö–ò: <span id="aimScore">0</span></span>
            <span class="highScore">üèÜ <span id="aimHighScore">0</span></span>
        </div>
        <div class="timer" id="aimTimer">60</div>
        <div id="aimTargets"></div>
    </div>

    <!-- –ò–ì–†–ê 2: –¢–†–ï–ö–ò–ù–ì -->
    <div id="tracking" class="gameContainer">
        <button class="backBtn" onclick="backToMenu()">‚Üê</button>
        <button class="gameSettingsBtn" onclick="openSettings()">‚öô</button>
        <div class="stats">
            <span>–û–ß–ö–ò: <span id="trackingScore">0</span></span>
            <span class="highScore">üèÜ <span id="trackingHighScore">0</span></span>
        </div>
        <div class="timer" id="trackingTimer">90</div>
        <div class="trackingCursor"></div>
        <div id="trackingArea"></div>
    </div>

    <!-- –ò–ì–†–ê 3: –†–ï–ê–ö–¶–ò–Ø -->
    <div id="reaction" class="gameContainer">
        <button class="backBtn" onclick="backToMenu()">‚Üê</button>
        <button class="gameSettingsBtn" onclick="openSettings()">‚öô</button>
        <div class="stats">
            <span>–û–ß–ö–ò: <span id="reactionScore">0</span></span>
            <span class="highScore">üèÜ <span id="reactionHighScore">0</span></span>
        </div>
        <div class="timer" id="reactionTimer">45</div>
        <div id="reactionDots"></div>
    </div>

    <!-- –ò–ì–†–ê 4: –¢–†–ê–ï–ö–¢–û–†–ò–Ø -->
    <div id="trajectory" class="gameContainer">
        <button class="backBtn" onclick="backToMenu()">‚Üê</button>
        <button class="gameSettingsBtn" onclick="openSettings()">‚öô</button>
        <div class="stats">
            <span>–û–ß–ö–ò: <span id="trajectoryScore">0</span></span>
            <span class="highScore">üèÜ <span id="trajectoryHighScore">0</span></span>
        </div>
        <div class="progressContainer">
            <div class="progressBar" id="trajectoryProgress"></div>
        </div>
        <div class="progressText">–ü–†–û–ì–†–ï–°–°: <span id="progressPercent">0%</span></div>
        <div class="timer" id="trajectoryTimer">60</div>
        <div class="speedInfo" id="speedInfo"></div>
        <div class="trajectoryCursor"></div>
        <canvas id="trajectoryCanvas" class="trajectoryLine"></canvas>
        <div class="trajectoryHint" id="trajectoryHint">–°–ª–µ–¥–∏ –∑–∞ –æ—Ä–∞–Ω–∂–µ–≤–æ–π —Ç–æ—á–∫–æ–π!</div>
        <div id="trajectoryArea"></div>
    </div>

    <!-- –ò–ì–†–ê 5: –ì–ò–ú–ù–ê–°–¢–ò–ö–ê –î–õ–Ø –ì–õ–ê–ó -->
    <div id="gymnastics" class="gameContainer">
        <button class="backBtn" onclick="backToMenu()">‚Üê</button>
        <button class="gameSettingsBtn" onclick="openSettings()">‚öô</button>
        <div class="stats">
            <span>–£–ü–†–ê–ñ–ù–ï–ù–ò–Ø: <span id="gymnasticsScore">0</span></span>
            <span class="highScore">üèÜ <span id="gymnasticsHighScore">0</span></span>
        </div>
        <div class="eyeProgress">
            <div class="eyeProgressFill" id="eyeProgressFill"></div>
        </div>
        <div class="eyeProgressText">–ü–†–û–ì–†–ï–°–°: <span id="eyeProgressPercent">0%</span></div>
        <div class="timer" id="gymnasticsTimer">90</div>
        <div class="eyeInstruction" id="eyeInstruction">–°–ª–µ–¥–∏—Ç–µ –∑–∞ –≥–æ–ª—É–±—ã–º –∫—Ä—É–≥–æ–º –≥–ª–∞–∑–∞–º–∏. –ù–µ –¥–≤–∏–≥–∞–π—Ç–µ –≥–æ–ª–æ–≤–æ–π!</div>
        <div class="breathingCircle"></div>
        <div id="eyeArea"></div>
    </div>

    <script>
        let currentGame = null;
        let gameActive = false;
        let timers = [];
        let animationId = null;

        // –§–£–ù–ö–¶–ò–ò –î–õ–Ø –†–ï–ö–û–†–î–û–í
        function saveHighScore(game, score) {
            const key = `clashpoint_high_${game}`;
            const current = parseInt(localStorage.getItem(key) || 0);
            if (score > current) {
                localStorage.setItem(key, score.toString());
                return true;
            }
            return false;
        }

        function getHighScore(game) {
            return localStorage.getItem(`clashpoint_high_${game}`) || 0;
        }

        function updateHighScoreDisplay(game, elementId) {
            const highScore = getHighScore(game);
            document.getElementById(elementId).textContent = highScore;
        }

        // –ù–ê–°–¢–†–û–ô–ö–ò
        function openSettings() {
            document.getElementById('settingsMenu').style.display = 'flex';
        }

        function closeSettings() {
            document.getElementById('settingsMenu').style.display = 'none';
        }

        function openPrivacy() {
            document.getElementById('settingsMenu').style.display = 'none';
            document.getElementById('privacyMenu').style.display = 'flex';
        }

        function closePrivacy() {
            document.getElementById('privacyMenu').style.display = 'none';
            document.getElementById('settingsMenu').style.display = 'flex';
        }

        function showInfo() {
            alert('Clashpoint\n–¢—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ\n5 —Ä–µ–∂–∏–º–æ–≤ –¥–ª—è —Ä–∞–∑–º–∏–Ω–∫–∏\n\n–ü–†–ò–¶–ï–õ - 60 —Å–µ–∫\n–¢–†–ï–ö–ò–ù–ì - 90 —Å–µ–∫\n–†–ï–ê–ö–¶–ò–Ø - 45 —Å–µ–∫\n–¢–†–ê–ï–ö–¢–û–†–ò–Ø - 60 —Å–µ–∫\n–ì–ò–ú–ù–ê–°–¢–ò–ö–ê - 90 —Å–µ–∫\n\n–ì–ò–ú–ù–ê–°–¢–ò–ö–ê: –†–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –¥–ª—è –≥–ª–∞–∑');
            closeSettings();
        }

        function resetAll() {
            if (confirm('–°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ —Ä–µ–∫–æ—Ä–¥—ã?')) {
                localStorage.removeItem('clashpoint_high_aim');
                localStorage.removeItem('clashpoint_high_tracking');
                localStorage.removeItem('clashpoint_high_reaction');
                localStorage.removeItem('clashpoint_high_trajectory');
                localStorage.removeItem('clashpoint_high_gymnastics');
                updateHighScoreDisplay('aim', 'aimHighScore');
                updateHighScoreDisplay('tracking', 'trackingHighScore');
                updateHighScoreDisplay('reaction', 'reactionHighScore');
                updateHighScoreDisplay('trajectory', 'trajectoryHighScore');
                updateHighScoreDisplay('gymnastics', 'gymnasticsHighScore');
                alert('–†–µ–∫–æ—Ä–¥—ã —Å–±—Ä–æ—à–µ–Ω—ã!');
            }
            closeSettings();
        }

        // –û–°–ù–û–í–ù–´–ï –§–£–ù–ö–¶–ò–ò
        function startGame(gameId) {
            document.getElementById('gameMenu').style.display = 'none';
            document.getElementById(gameId).style.display = 'block';
            currentGame = gameId;
            gameActive = true;
            
            stopAllTimers();
            
            switch(gameId) {
                case 'aimTrainer':
                    startAimTrainer();
                    break;
                case 'tracking':
                    startTracking();
                    break;
                case 'reaction':
                    startReaction();
                    break;
                case 'trajectory':
                    startTrajectory();
                    break;
                case 'gymnastics':
                    startGymnastics();
                    break;
            }
        }

        function backToMenu() {
            if (currentGame) {
                document.getElementById(currentGame).style.display = 'none';
                gameActive = false;
                stopAllTimers();
                if (animationId) {
                    cancelAnimationFrame(animationId);
                    animationId = null;
                }
                currentGame = null;
            }
            document.getElementById('gameMenu').style.display = 'flex';
        }

        function stopAllTimers() {
            timers.forEach(timer => {
                clearInterval(timer);
                clearTimeout(timer);
            });
            timers = [];
        }

        // –ò–ì–†–ê 1: –ü–†–ò–¶–ï–õ
        function startAimTrainer() {
            let score = 0;
            let time = 60;
            const targets = [];
            const minDistance = 80;
            
            document.getElementById('aimScore').textContent = score;
            document.getElementById('aimTimer').textContent = time;
            updateHighScoreDisplay('aim', 'aimHighScore');
            
            createTargets();
            
            const timer = setInterval(() => {
                time--;
                document.getElementById('aimTimer').textContent = time;
                
                if (time <= 10) {
                    document.getElementById('aimTimer').classList.add('pulse');
                }
                
                if (time <= 0) {
                    clearInterval(timer);
                    gameActive = false;
                    document.getElementById('aimTimer').classList.remove('pulse');
                    
                    const beatRecord = saveHighScore('aim', score);
                    setTimeout(() => {
                        let message = `–ü–†–ò–¶–ï–õ\n–û—á–∫–∏: ${score}`;
                        const highScore = getHighScore('aim');
                        message += `\n–†–µ–∫–æ—Ä–¥: ${highScore}`;
                        if (beatRecord) message += "\nüéâ –ù–û–í–´–ô –†–ï–ö–û–†–î!";
                        alert(message);
                        backToMenu();
                    }, 500);
                }
            }, 1000);
            
            timers.push(timer);
            
            function createTargets() {
                const container = document.getElementById('aimTargets');
                container.innerHTML = '';
                
                for(let i = 0; i < 5; i++) {
                    createTarget();
                }
                
                function createTarget() {
                    const target = document.createElement('div');
                    target.className = 'target';
                    
                    let x, y;
                    let attempts = 0;
                    
                    do {
                        x = 60 + Math.random() * (window.innerWidth - 120);
                        y = 100 + Math.random() * (window.innerHeight - 200);
                        attempts++;
                    } while (isTooClose(x, y) && attempts < 50);
                    
                    target.style.left = `${x}px`;
                    target.style.top = `${y}px`;
                    
                    targets.push({x, y, element: target});
                    
                    target.onclick = function() {
                        if (!gameActive || time <= 0) return;
                        
                        score++;
                        document.getElementById('aimScore').textContent = score;
                        
                        this.classList.add('clicked');
                        
                        setTimeout(() => {
                            const index = targets.findIndex(t => t.element === this);
                            if (index > -1) targets.splice(index, 1);
                            
                            let newX, newY;
                            let newAttempts = 0;
                            
                            do {
                                newX = 60 + Math.random() * (window.innerWidth - 120);
                                newY = 100 + Math.random() * (window.innerHeight - 200);
                                newAttempts++;
                            } while (isTooClose(newX, newY) && newAttempts < 50);
                            
                            this.style.left = `${newX}px`;
                            this.style.top = `${newY}px`;
                            this.classList.remove('clicked');
                            
                            targets.push({x: newX, y: newY, element: this});
                        }, 150);
                    };
                    
                    container.appendChild(target);
                }
                
                function isTooClose(x, y) {
                    for (const target of targets) {
                        const distance = Math.sqrt(Math.pow(x - target.x, 2) + Math.pow(y - target.y, 2));
                        if (distance < minDistance) return true;
                    }
                    return false;
                }
            }
        }

        // –ò–ì–†–ê 2: –¢–†–ï–ö–ò–ù–ì
        function startTracking() {
            let score = 0;
            let time = 90;
            
            document.getElementById('trackingScore').textContent = score;
            document.getElementById('trackingTimer').textContent = time;
            updateHighScoreDisplay('tracking', 'trackingHighScore');
            
            const area = document.getElementById('trackingArea');
            area.innerHTML = '';
            
            const circle = document.createElement('div');
            circle.className = 'trackingCircle';
            circle.id = 'trackCircle';
            
            let circleX = 100 + Math.random() * (window.innerWidth - 200);
            let circleY = 150 + Math.random() * (window.innerHeight - 300);
            
            circle.style.left = `${circleX}px`;
            circle.style.top = `${circleY}px`;
            
            area.appendChild(circle);
            
            const cursor = document.querySelector('.trackingCursor');
            
            function handleMove(e) {
                let x, y;
                
                if (e.type === 'touchmove') {
                    e.preventDefault();
                    x = e.touches[0].clientX;
                    y = e.touches[0].clientY;
                } else {
                    x = e.clientX;
                    y = e.clientY;
                }
                
                cursor.style.left = `${x}px`;
                cursor.style.top = `${y}px`;
                
                checkCollision(x, y);
            }
            
            document.addEventListener('mousemove', handleMove);
            document.addEventListener('touchmove', handleMove, { passive: false });
            
            const timer = setInterval(() => {
                time--;
                document.getElementById('trackingTimer').textContent = time;
                
                if (time <= 10) {
                    document.getElementById('trackingTimer').classList.add('pulse');
                }
                
                if (time <= 0) {
                    clearInterval(timer);
                    gameActive = false;
                    document.getElementById('trackingTimer').classList.remove('pulse');
                    document.removeEventListener('mousemove', handleMove);
                    document.removeEventListener('touchmove', handleMove);
                    
                    const beatRecord = saveHighScore('tracking', score);
                    setTimeout(() => {
                        let message = `–¢–†–ï–ö–ò–ù–ì\n–û—á–∫–∏: ${score}`;
                        const highScore = getHighScore('tracking');
                        message += `\n–†–µ–∫–æ—Ä–¥: ${highScore}`;
                        if (beatRecord) message += "\nüéâ –ù–û–í–´–ô –†–ï–ö–û–†–î!";
                        alert(message);
                        backToMenu();
                    }, 500);
                }
            }, 1000);
            
            timers.push(timer);
            
            function animateTracking() {
                if (!gameActive || time <= 0) return;
                
                const circle = document.getElementById('trackCircle');
                if (!circle) return;
                
                const moveX = (Math.random() - 0.5) * 12;
                const moveY = (Math.random() - 0.5) * 12;
                
                circleX += moveX;
                circleY += moveY;
                
                if (circleX < 50) circleX = 50;
                if (circleX > window.innerWidth - 50) circleX = window.innerWidth - 50;
                if (circleY < 100) circleY = 100;
                if (circleY > window.innerHeight - 100) circleY = window.innerHeight - 100;
                
                circle.style.left = `${circleX}px`;
                circle.style.top = `${circleY}px`;
                
                const shakeX = (Math.random() - 0.5) * 8;
                const shakeY = (Math.random() - 0.5) * 8;
                
                circle.style.transform = `translate(${shakeX}px, ${shakeY}px)`;
                
                animationId = requestAnimationFrame(animateTracking);
            }
            
            animateTracking();
            
            function checkCollision(cursorX, cursorY) {
                if (!gameActive || time <= 0) return;
                
                const circle = document.getElementById('trackCircle');
                if (!circle) return;
                
                const circleRect = circle.getBoundingClientRect();
                const circleCenterX = circleRect.left + circleRect.width / 2;
                const circleCenterY = circleRect.top + circleRect.height / 2;
                
                const distance = Math.sqrt(
                    Math.pow(circleCenterX - cursorX, 2) + 
                    Math.pow(circleCenterY - cursorY, 2)
                );
                
                if (distance < 40) {
                    score++;
                    document.getElementById('trackingScore').textContent = score;
                    
                    circleX = 100 + Math.random() * (window.innerWidth - 200);
                    circleY = 150 + Math.random() * (window.innerHeight - 300);
                    
                    circle.style.left = `${circleX}px`;
                    circle.style.top = `${circleY}px`;
                }
            }
        }

        // –ò–ì–†–ê 3: –†–ï–ê–ö–¶–ò–Ø
        function startReaction() {
            let score = 0;
            let time = 45;
            
            document.getElementById('reactionScore').textContent = score;
            document.getElementById('reactionTimer').textContent = time;
            updateHighScoreDisplay('reaction', 'reactionHighScore');
            
            createDots();
            
            const timer = setInterval(() => {
                time--;
                document.getElementById('reactionTimer').textContent = time;
                
                if (time <= 10) {
                    document.getElementById('reactionTimer').classList.add('pulse');
                }
                
                if (time <= 0) {
                    clearInterval(timer);
                    clearInterval(dotTimer);
                    gameActive = false;
                    document.getElementById('reactionTimer').classList.remove('pulse');
                    
                    const beatRecord = saveHighScore('reaction', score);
                    setTimeout(() => {
                        let message = `–†–ï–ê–ö–¶–ò–Ø\n–û—á–∫–∏: ${score}`;
                        const highScore = getHighScore('reaction');
                        message += `\n–†–µ–∫–æ—Ä–¥: ${highScore}`;
                        if (beatRecord) message += "\nüéâ –ù–û–í–´–ô –†–ï–ö–û–†–î!";
                        alert(message);
                        backToMenu();
                    }, 500);
                }
            }, 1000);
            
            timers.push(timer);
            
            const dotTimer = setInterval(() => {
                if (!gameActive || time <= 0) return;
                
                const dots = document.querySelectorAll('.reactionDot');
                const inactiveDots = Array.from(dots).filter(dot => !dot.classList.contains('active'));
                
                if (inactiveDots.length === 0) return;
                
                const randomDot = inactiveDots[Math.floor(Math.random() * inactiveDots.length)];
                randomDot.classList.add('active');
                
                setTimeout(() => {
                    if (randomDot.classList.contains('active')) {
                        randomDot.classList.remove('active');
                    }
                }, 1200);
                
            }, 800);
            
            timers.push(dotTimer);
            
            function createDots() {
                const container = document.getElementById('reactionDots');
                container.innerHTML = '';
                
                const positions = [
                    {x: window.innerWidth / 4, y: window.innerHeight / 2},
                    {x: window.innerWidth / 2, y: window.innerHeight / 2},
                    {x: window.innerWidth * 3/4, y: window.innerHeight / 2}
                ];
                
                positions.forEach((pos, index) => {
                    const dot = document.createElement('div');
                    dot.className = 'reactionDot';
                    dot.style.left = `${pos.x}px`;
                    dot.style.top = `${pos.y}px`;
                    
                    dot.onclick = function() {
                        if (!gameActive || time <= 0 || !this.classList.contains('active')) return;
                        
                        score += 2;
                        document.getElementById('reactionScore').textContent = score;
                        this.classList.remove('active');
                    };
                    
                    container.appendChild(dot);
                });
            }
        }

        // –ò–ì–†–ê 4: –¢–†–ê–ï–ö–¢–û–†–ò–Ø
        function startTrajectory() {
            let score = 0;
            let time = 60;
            let progress = 0;
            let totalPathLength = 0;
            let currentPoint = 0;
            let trajectoryPoints = [];
            let lastCollisionTime = 0;
            const collisionCooldown = 300;
            let speedMultiplier = 0.8;
            let trajectoryType = '';
            let direction = 1;
            
            document.getElementById('trajectoryScore').textContent = score;
            document.getElementById('trajectoryTimer').textContent = time;
            updateHighScoreDisplay('trajectory', 'trajectoryHighScore');
            document.getElementById('progressPercent').textContent = '0%';
            document.getElementById('trajectoryProgress').style.width = '0%';
            
            const area = document.getElementById('trajectoryArea');
            area.innerHTML = '';
            
            const circle = document.createElement('div');
            circle.className = 'trajectoryCircle';
            circle.id = 'trajectoryCircle';
            
            const startX = window.innerWidth / 2;
            const startY = window.innerHeight / 2;
            circle.style.left = `${startX}px`;
            circle.style.top = `${startY}px`;
            
            area.appendChild(circle);
            
            const cursor = document.querySelector('.trajectoryCursor');
            
            generateTrajectory();
            drawTrajectory();
            updateSpeedInfo();
            
            function handleMove(e) {
                let x, y;
                
                if (e.type === 'touchmove') {
                    e.preventDefault();
                    x = e.touches[0].clientX;
                    y = e.touches[0].clientY;
                } else {
                    x = e.clientX;
                    y = e.clientY;
                }
                
                cursor.style.left = `${x}px`;
                cursor.style.top = `${y}px`;
                
                checkTrajectoryCollision(x, y);
            }
            
            document.addEventListener('mousemove', handleMove);
            document.addEventListener('touchmove', handleMove, { passive: false });
            
            const timer = setInterval(() => {
                time--;
                document.getElementById('trajectoryTimer').textContent = time;
                
                if (time <= 10) {
                    document.getElementById('trajectoryTimer').classList.add('pulse');
                }
                
                if (time <= 0) {
                    clearInterval(timer);
                    gameActive = false;
                    document.getElementById('trajectoryTimer').classList.remove('pulse');
                    document.removeEventListener('mousemove', handleMove);
                    document.removeEventListener('touchmove', handleMove);
                    
                    const beatRecord = saveHighScore('trajectory', score);
                    setTimeout(() => {
                        let message = `–¢–†–ê–ï–ö–¢–û–†–ò–Ø\n–û—á–∫–∏: ${score}\n–ü—Ä–æ–≥—Ä–µ—Å—Å: ${progress.toFixed(1)}%\n–¢–∏–ø: ${trajectoryType}`;
                        const highScore = getHighScore('trajectory');
                        message += `\n–†–µ–∫–æ—Ä–¥: ${highScore}`;
                        if (beatRecord) message += "\nüéâ –ù–û–í–´–ô –†–ï–ö–û–†–î!";
                        alert(message);
                        backToMenu();
                    }, 500);
                }
            }, 1000);
            
            timers.push(timer);
            
            const changeTimer = setInterval(() => {
                if (!gameActive || time <= 0) return;
                
                speedMultiplier = 0.6 + Math.random() * 1.2;
                
                if (Math.random() > 0.8) {
                    direction *= -1;
                }
                
                if (Math.random() > 0.95) {
                    generateTrajectory();
                    drawTrajectory();
                }
                
                updateSpeedInfo();
                
            }, 5000);
            
            timers.push(changeTimer);
            
            function animateTrajectory(currentTime) {
                if (!gameActive || time <= 0) {
                    animationId = null;
                    return;
                }
                
                const speed = 1.5 * speedMultiplier * direction;
                currentPoint = (currentPoint + speed) % trajectoryPoints.length;
                if (currentPoint < 0) currentPoint = trajectoryPoints.length + currentPoint;
                
                const pointIndex = Math.floor(currentPoint);
                const point = trajectoryPoints[pointIndex];
                const circle = document.getElementById('trajectoryCircle');
                
                if (circle && point) {
                    const currentX = parseFloat(circle.style.left);
                    const currentY = parseFloat(circle.style.top);
                    
                    const newX = currentX + (point.x - currentX) * 0.2;
                    const newY = currentY + (point.y - currentY) * 0.2;
                    
                    circle.style.left = `${newX}px`;
                    circle.style.top = `${newY}px`;
                    
                    const shakeIntensity = speedMultiplier * 4;
                    const shakeX = (Math.random() - 0.5) * shakeIntensity;
                    const shakeY = (Math.random() - 0.5) * shakeIntensity;
                    circle.style.transform = `translate(${shakeX}px, ${shakeY}px)`;
                }
                
                animationId = requestAnimationFrame(animateTrajectory);
            }
            
            animationId = requestAnimationFrame(animateTrajectory);
            
            function generateTrajectory() {
                trajectoryPoints = [];
                const centerX = window.innerWidth / 2;
                const centerY = window.innerHeight / 2;
                const maxRadius = Math.min(window.innerWidth, window.innerHeight) * 0.35;
                
                const types = ['circle', 'ellipse', 'square', 'infinity', 'wave', 'flower'];
                const type = types[Math.floor(Math.random() * types.length)];
                trajectoryType = getTrajectoryName(type);
                
                const pointCount = 180;
                
                for (let i = 0; i < pointCount; i++) {
                    const t = (i / pointCount) * Math.PI * 2;
                    let x, y;
                    
                    switch(type) {
                        case 'circle':
                            x = centerX + maxRadius * Math.sin(t);
                            y = centerY + maxRadius * Math.cos(t);
                            break;
                        case 'ellipse':
                            x = centerX + maxRadius * 0.7 * Math.sin(t);
                            y = centerY + maxRadius * 0.5 * Math.cos(t);
                            break;
                        case 'square':
                            const side = Math.floor((t / (Math.PI / 2)) % 4);
                            const modT = t % (Math.PI / 2);
                            const radius = maxRadius * 0.6;
                            switch(side) {
                                case 0: x = centerX + radius * Math.sin(modT); y = centerY - radius; break;
                                case 1: x = centerX + radius; y = centerY + radius * Math.sin(modT); break;
                                case 2: x = centerX - radius * Math.sin(modT); y = centerY + radius; break;
                                case 3: x = centerX - radius; y = centerY - radius * Math.sin(modT); break;
                            }
                            break;
                        case 'infinity':
                            x = centerX + maxRadius * 0.5 * Math.sin(t);
                            y = centerY + maxRadius * 0.3 * Math.sin(2 * t);
                            break;
                        case 'wave':
                            x = centerX + maxRadius * 0.5 * Math.sin(t);
                            y = centerY + maxRadius * 0.3 * Math.sin(3 * t);
                            break;
                        case 'flower':
                            const flowerRadius = maxRadius * (0.4 + 0.2 * Math.sin(t * 5));
                            x = centerX + flowerRadius * Math.sin(t);
                            y = centerY + flowerRadius * Math.cos(t);
                            break;
                    }
                    
                    trajectoryPoints.push({ x, y });
                }
                
                totalPathLength = 0;
                for (let i = 1; i < trajectoryPoints.length; i++) {
                    const dx = trajectoryPoints[i].x - trajectoryPoints[i-1].x;
                    const dy = trajectoryPoints[i].y - trajectoryPoints[i-1].y;
                    totalPathLength += Math.sqrt(dx * dx + dy * dy);
                }
            }
            
            function getTrajectoryName(type) {
                const names = {
                    'circle': '–ö—Ä—É–≥', 'ellipse': '–≠–ª–ª–∏–ø—Å', 'square': '–ö–≤–∞–¥—Ä–∞—Ç',
                    'infinity': '–ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å', 'wave': '–í–æ–ª–Ω–∞', 'flower': '–¶–≤–µ—Ç–æ–∫'
                };
                return names[type] || '–°–ª—É—á–∞–π–Ω–∞—è';
            }
            
            function drawTrajectory() {
                const canvas = document.getElementById('trajectoryCanvas');
                const ctx = canvas.getContext('2d');
                
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                
                ctx.strokeStyle = 'rgba(255, 170, 0, 0.25)';
                ctx.lineWidth = 2;
                ctx.beginPath();
                
                for (let i = 0; i < trajectoryPoints.length; i++) {
                    const point = trajectoryPoints[i];
                    if (i === 0) {
                        ctx.moveTo(point.x, point.y);
                    } else {
                        ctx.lineTo(point.x, point.y);
                    }
                }
                
                ctx.stroke();
            }
            
            function updateSpeedInfo() {
                const speedText = `–°–∫–æ—Ä–æ—Å—Ç—å: ${speedMultiplier.toFixed(1)}x | –¢–∏–ø: ${trajectoryType}`;
                document.getElementById('speedInfo').textContent = speedText;
                
                if (speedMultiplier > 1.4) {
                    document.getElementById('speedInfo').style.color = '#ffaa00';
                } else if (speedMultiplier > 1.0) {
                    document.getElementById('speedInfo').style.color = '#ffaa00';
                } else {
                    document.getElementById('speedInfo').style.color = '#cc8800';
                }
            }
            
            function checkTrajectoryCollision(cursorX, cursorY) {
                if (!gameActive || time <= 0) return;
                
                const now = Date.now();
                if (now - lastCollisionTime < collisionCooldown) return;
                
                const circle = document.getElementById('trajectoryCircle');
                if (!circle) return;
                
                const circleRect = circle.getBoundingClientRect();
                const circleCenterX = circleRect.left + circleRect.width / 2;
                const circleCenterY = circleRect.top + circleRect.height / 2;
                
                const distance = Math.sqrt(
                    Math.pow(circleCenterX - cursorX, 2) + 
                    Math.pow(circleCenterY - cursorY, 2)
                );
                
                const hitRadius = 45;
                
                if (distance < hitRadius) {
                    lastCollisionTime = now;
                    
                    score++;
                    document.getElementById('trajectoryScore').textContent = score;
                    
                    const additionalProgress = (totalPathLength / trajectoryPoints.length / totalPathLength) * 100 * 0.3;
                    progress = Math.min(100, progress + additionalProgress);
                    
                    document.getElementById('progressPercent').textContent = `${progress.toFixed(1)}%`;
                    document.getElementById('trajectoryProgress').style.width = `${progress}%`;
                    
                    circle.style.boxShadow = `0 0 40px rgba(255, 170, 0, 1)`;
                    setTimeout(() => {
                        if (circle) {
                            circle.style.boxShadow = '0 0 30px rgba(255, 170, 0, 0.8)';
                        }
                    }, 200);
                }
            }
            
            setTimeout(() => {
                document.getElementById('trajectoryHint').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('trajectoryHint').style.display = 'none';
                }, 500);
            }, 3000);
        }

        // –ò–ì–†–ê 5: –ì–ò–ú–ù–ê–°–¢–ò–ö–ê –î–õ–Ø –ì–õ–ê–ó
        function startGymnastics() {
            let score = 0;
            let time = 90;
            let progress = 0;
            let currentExercise = 1;
            let isResting = false;
            let eyeTarget = null;
            let animationStartTime = 0;
            
            document.getElementById('gymnasticsScore').textContent = score;
            document.getElementById('gymnasticsTimer').textContent = time;
            updateHighScoreDisplay('gymnastics', 'gymnasticsHighScore');
            document.getElementById('eyeProgressPercent').textContent = '0%';
            document.getElementById('eyeProgressFill').style.width = '0%';
            
            const area = document.getElementById('eyeArea');
            area.innerHTML = '';
            
            // –¢–∞–π–º–µ—Ä –∏–≥—Ä—ã
            const timer = setInterval(() => {
                time--;
                document.getElementById('gymnasticsTimer').textContent = time;
                
                if (time <= 10) {
                    document.getElementById('gymnasticsTimer').classList.add('pulse');
                }
                
                if (time <= 0) {
                    clearInterval(timer);
                    gameActive = false;
                    document.getElementById('gymnasticsTimer').classList.remove('pulse');
                    
                    const beatRecord = saveHighScore('gymnastics', score);
                    setTimeout(() => {
                        let message = `–ì–ò–ú–ù–ê–°–¢–ò–ö–ê –î–õ–Ø –ì–õ–ê–ó\n–í—ã–ø–æ–ª–Ω–µ–Ω–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π: ${score}\n–ü—Ä–æ–≥—Ä–µ—Å—Å: ${progress.toFixed(1)}%`;
                        const highScore = getHighScore('gymnastics');
                        message += `\n–†–µ–∫–æ—Ä–¥: ${highScore}`;
                        if (beatRecord) message += "\nüéâ –ù–û–í–´–ô –†–ï–ö–û–†–î!";
                        alert(message);
                        backToMenu();
                    }, 500);
                }
            }, 1000);
            
            timers.push(timer);
            
            // –ù–∞—á–∏–Ω–∞–µ–º –ø–µ—Ä–≤–æ–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ
            startNextExercise();
            
            function startNextExercise() {
                if (!gameActive || time <= 0) return;
                
                // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
                progress = Math.min(100, progress + 8);
                document.getElementById('eyeProgressPercent').textContent = `${progress.toFixed(1)}%`;
                document.getElementById('eyeProgressFill').style.width = `${progress}%`;
                
                // –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â—É—é —Ü–µ–ª—å, –µ—Å–ª–∏ –µ—Å—Ç—å
                if (eyeTarget && eyeTarget.parentNode) {
                    eyeTarget.remove();
                }
                
                // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é —Ü–µ–ª—å –¥–ª—è –≥–ª–∞–∑
                eyeTarget = document.createElement('div');
                eyeTarget.className = 'eyeTarget';
                
                // –í—ã–±–∏—Ä–∞–µ–º —Ç–∏–ø —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
                const exerciseType = currentExercise % 6;
                let instruction = '';
                
                switch(exerciseType) {
                    case 0: // –í–≤–µ—Ä—Ö-–≤–Ω–∏–∑
                        eyeTarget.style.left = '50%';
                        eyeTarget.style.top = '30%';
                        instruction = '–°–º–æ—Ç—Ä–∏—Ç–µ –≤–≤–µ—Ä—Ö, –∑–∞—Ç–µ–º –≤–Ω–∏–∑. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ 3 —Ä–∞–∑–∞.';
                        break;
                    case 1: // –í–ª–µ–≤–æ-–≤–ø—Ä–∞–≤–æ
                        eyeTarget.style.left = '20%';
                        eyeTarget.style.top = '50%';
                        instruction = '–°–º–æ—Ç—Ä–∏—Ç–µ –≤–ª–µ–≤–æ, –∑–∞—Ç–µ–º –≤–ø—Ä–∞–≤–æ. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ 3 —Ä–∞–∑–∞.';
                        break;
                    case 2: // –ü–æ –¥–∏–∞–≥–æ–Ω–∞–ª–∏
                        eyeTarget.style.left = '20%';
                        eyeTarget.style.top = '30%';
                        instruction = '–°–º–æ—Ç—Ä–∏—Ç–µ –ø–æ –¥–∏–∞–≥–æ–Ω–∞–ª–∏. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ 3 —Ä–∞–∑–∞.';
                        break;
                    case 3: // –ö—Ä—É–≥–∏
                        eyeTarget.style.left = '50%';
                        eyeTarget.style.top = '50%';
                        instruction = '–í—Ä–∞—â–∞–π—Ç–µ –≥–ª–∞–∑–∞–º–∏ –ø–æ –∫—Ä—É–≥—É. 3 —Ä–∞–∑–∞ –ø–æ —á–∞—Å–æ–≤–æ–π, 3 –ø—Ä–æ—Ç–∏–≤.';
                        break;
                    case 4: // –í–æ—Å—å–º–µ—Ä–∫–∏
                        eyeTarget.style.left = '80%';
                        eyeTarget.style.top = '50%';
                        instruction = '–°–º–æ—Ç—Ä–∏—Ç–µ, —Ä–∏—Å—É—è –≥–ª–∞–∑–∞–º–∏ –≤–æ—Å—å–º–µ—Ä–∫–∏.';
                        break;
                    case 5: // –§–æ–∫—É—Å–∏—Ä–æ–≤–∫–∞ –¥–∞–ª–µ–∫–æ-–±–ª–∏–∑–∫–æ
                        eyeTarget.style.left = '50%';
                        eyeTarget.style.top = '70%';
                        instruction = '–§–æ–∫—É—Å–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ —Ç–æ—á–∫–µ, –∑–∞—Ç–µ–º –≤–¥–∞–ª—å. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ 5 —Ä–∞–∑.';
                        break;
                }
                
                document.getElementById('eyeInstruction').textContent = instruction;
                area.appendChild(eyeTarget);
                
                // –ê–Ω–∏–º–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π
                if (exerciseType === 0) { // –í–≤–µ—Ä—Ö-–≤–Ω–∏–∑
                    animateUpDown();
                } else if (exerciseType === 1) { // –í–ª–µ–≤–æ-–≤–ø—Ä–∞–≤–æ
                    animateLeftRight();
                } else if (exerciseType === 2) { // –î–∏–∞–≥–æ–Ω–∞–ª—å
                    animateDiagonal();
                } else if (exerciseType === 3) { // –ö—Ä—É–≥–∏
                    animateCircles();
                } else if (exerciseType === 4) { // –í–æ—Å—å–º–µ—Ä–∫–∏
                    animateFigureEight();
                } else { // –°—Ç–∞—Ç–∏—á–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
                    eyeTarget.classList.add('active');
                }
                
                // –¢–∞–π–º–µ—Ä –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
                setTimeout(() => {
                    if (!gameActive) return;
                    
                    // –ó–∞–≤–µ—Ä—à–∞–µ–º —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ
                    completeExercise();
                    
                    // –ö–æ—Ä–æ—Ç–∫–∏–π –æ—Ç–¥—ã—Ö –º–µ–∂–¥—É —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è–º–∏
                    isResting = true;
                    document.getElementById('eyeInstruction').textContent = '–û—Ç–¥—ã—Ö–∞–π—Ç–µ. –ú–æ—Ä–≥–∞–π—Ç–µ —á–∞—Å—Ç–æ.';
                    
                    setTimeout(() => {
                        if (!gameActive) return;
                        
                        isResting = false;
                        currentExercise++;
                        startNextExercise();
                    }, 3000); // 3 —Å–µ–∫—É–Ω–¥—ã –æ—Ç–¥—ã—Ö–∞
                    
                }, 8000); // 8 —Å–µ–∫—É–Ω–¥ –Ω–∞ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ
            }
            
            function completeExercise() {
                if (!gameActive) return;
                
                score++;
                document.getElementById('gymnasticsScore').textContent = score;
                
                // –≠—Ñ—Ñ–µ–∫—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
                if (eyeTarget) {
                    eyeTarget.style.transform = 'scale(1.5)';
                    eyeTarget.style.opacity = '0.5';
                    eyeTarget.style.boxShadow = '0 0 80px rgba(0, 229, 255, 1)';
                    
                    setTimeout(() => {
                        if (eyeTarget && eyeTarget.parentNode) {
                            eyeTarget.remove();
                        }
                    }, 500);
                }
            }
            
            // –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π
            function animateUpDown() {
                if (!gameActive || !eyeTarget) return;
                
                const startY = 30; // 30% —Å–≤–µ—Ä—Ö—É
                const endY = 70;   // 70% —Å–≤–µ—Ä—Ö—É
                let direction = 1;
                let currentY = startY;
                let step = 0;
                
                function move() {
                    if (!gameActive || !eyeTarget) return;
                    
                    currentY += direction * 2; // –°–∫–æ—Ä–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è
                    
                    if (currentY >= endY) {
                        direction = -1;
                        step++;
                        eyeTarget.classList.add('active');
                        setTimeout(() => eyeTarget.classList.remove('active'), 300);
                    } else if (currentY <= startY) {
                        direction = 1;
                        step++;
                        eyeTarget.classList.add('active');
                        setTimeout(() => eyeTarget.classList.remove('active'), 300);
                    }
                    
                    eyeTarget.style.top = `${currentY}%`;
                    
                    if (step < 6) { // 3 —Ä–∞–∑–∞ –≤–≤–µ—Ä—Ö-–≤–Ω–∏–∑
                        requestAnimationFrame(move);
                    }
                }
                
                move();
            }
            
            function animateLeftRight() {
                if (!gameActive || !eyeTarget) return;
                
                const startX = 20; // 20% —Å–ª–µ–≤–∞
                const endX = 80;   // 80% —Å–ª–µ–≤–∞
                let direction = 1;
                let currentX = startX;
                let step = 0;
                
                function move() {
                    if (!gameActive || !eyeTarget) return;
                    
                    currentX += direction * 2;
                    
                    if (currentX >= endX) {
                        direction = -1;
                        step++;
                        eyeTarget.classList.add('active');
                        setTimeout(() => eyeTarget.classList.remove('active'), 300);
                    } else if (currentX <= startX) {
                        direction = 1;
                        step++;
                        eyeTarget.classList.add('active');
                        setTimeout(() => eyeTarget.classList.remove('active'), 300);
                    }
                    
                    eyeTarget.style.left = `${currentX}%`;
                    
                    if (step < 6) { // 3 —Ä–∞–∑–∞ –≤–ª–µ–≤–æ-–≤–ø—Ä–∞–≤–æ
                        requestAnimationFrame(move);
                    }
                }
                
                move();
            }
            
            function animateDiagonal() {
                if (!gameActive || !eyeTarget) return;
                
                const positions = [
                    {x: 20, y: 30}, // –õ–µ–≤—ã–π –≤–µ—Ä—Ö
                    {x: 80, y: 70}, // –ü—Ä–∞–≤—ã–π –Ω–∏–∑
                    {x: 80, y: 30}, // –ü—Ä–∞–≤—ã–π –≤–µ—Ä—Ö
                    {x: 20, y: 70}  // –õ–µ–≤—ã–π –Ω–∏–∑
                ];
                let currentPos = 0;
                let step = 0;
                
                function move() {
                    if (!gameActive || !eyeTarget) return;
                    
                    const target = positions[currentPos];
                    const currentX = parseFloat(eyeTarget.style.left) || 20;
                    const currentY = parseFloat(eyeTarget.style.top) || 30;
                    
                    const dx = target.x - currentX;
                    const dy = target.y - currentY;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance > 1) {
                        eyeTarget.style.left = `${currentX + dx * 0.1}%`;
                        eyeTarget.style.top = `${currentY + dy * 0.1}%`;
                        requestAnimationFrame(move);
                    } else {
                        eyeTarget.classList.add('active');
                        setTimeout(() => eyeTarget.classList.remove('active'), 300);
                        
                        currentPos = (currentPos + 1) % positions.length;
                        step++;
                        
                        if (step < 12) { // 3 –ø–æ–ª–Ω—ã—Ö —Ü–∏–∫–ª–∞
                            setTimeout(move, 300);
                        }
                    }
                }
                
                move();
            }
            
            function animateCircles() {
                if (!gameActive || !eyeTarget) return;
                
                const centerX = 50;
                const centerY = 50;
                const radius = 30;
                let angle = 0;
                let circlesCompleted = 0;
                let direction = 1; // 1 –ø–æ —á–∞—Å–æ–≤–æ–π, -1 –ø—Ä–æ—Ç–∏–≤
                
                function move() {
                    if (!gameActive || !eyeTarget) return;
                    
                    angle += direction * 0.05; // –°–∫–æ—Ä–æ—Å—Ç—å –≤—Ä–∞—â–µ–Ω–∏—è
                    
                    const x = centerX + Math.cos(angle) * radius;
                    const y = centerY + Math.sin(angle) * radius;
                    
                    eyeTarget.style.left = `${x}%`;
                    eyeTarget.style.top = `${y}%`;
                    
                    if (angle >= Math.PI * 2) {
                        angle = 0;
                        circlesCompleted++;
                        eyeTarget.classList.add('active');
                        setTimeout(() => eyeTarget.classList.remove('active'), 300);
                        
                        if (circlesCompleted === 3 && direction === 1) {
                            // –ú–µ–Ω—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
                            direction = -1;
                            circlesCompleted = 0;
                        } else if (circlesCompleted === 3 && direction === -1) {
                            return; // –ó–∞–≤–µ—Ä—à–∞–µ–º
                        }
                    }
                    
                    requestAnimationFrame(move);
                }
                
                move();
            }
            
            function animateFigureEight() {
                if (!gameActive || !eyeTarget) return;
                
                const centerX = 50;
                const centerY = 50;
                const a = 25; // –ü–æ–ª—É–æ—Å—å –ø–æ X
                const b = 15; // –ü–æ–ª—É–æ—Å—å –ø–æ Y
                let t = 0;
                let eightsCompleted = 0;
                
                function move() {
                    if (!gameActive || !eyeTarget) return;
                    
                    t += 0.03; // –°–∫–æ—Ä–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è
                    
                    // –ü–∞—Ä–∞–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ —É—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–ª—è –≤–æ—Å—å–º–µ—Ä–∫–∏ (–ª–µ–º–Ω–∏—Å–∫–∞—Ç–∞)
                    const scale = 1.2;
                    const x = centerX + (a * Math.sin(t)) * scale;
                    const y = centerY + (b * Math.sin(2 * t) / 2) * scale;
                    
                    eyeTarget.style.left = `${x}%`;
                    eyeTarget.style.top = `${y}%`;
                    
                    if (t >= Math.PI * 2) {
                        t = 0;
                        eightsCompleted++;
                        eyeTarget.classList.add('active');
                        setTimeout(() => eyeTarget.classList.remove('active'), 300);
                        
                        if (eightsCompleted >= 3) {
                            return; // –ó–∞–≤–µ—Ä—à–∞–µ–º
                        }
                    }
                    
                    requestAnimationFrame(move);
                }
                
                move();
            }
            
            // –ü—Ä—è—á–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                document.getElementById('eyeInstruction').style.opacity = '0.5';
            }, 5000);
        }

        // –û–ë–†–ê–ë–û–¢–ö–ê –†–ï–°–ê–ô–ó–ê
        window.addEventListener('resize', function() {
            if (currentGame === 'tracking' && gameActive) {
                const circle = document.getElementById('trackCircle');
                if (circle) {
                    let circleX = parseFloat(circle.style.left);
                    let circleY = parseFloat(circle.style.top);
                    
                    if (circleX > window.innerWidth - 50) circleX = window.innerWidth - 50;
                    if (circleY > window.innerHeight - 100) circleY = window.innerHeight - 100;
                    
                    circle.style.left = `${circleX}px`;
                    circle.style.top = `${circleY}px`;
                }
            }
            
            if (currentGame === 'trajectory' && gameActive) {
                const canvas = document.getElementById('trajectoryCanvas');
                if (canvas) {
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                }
            }
        });

        // –ó–ê–ü–†–ï–¢ –ö–û–ù–¢–ï–ö–°–¢–ù–û–ì–û –ú–ï–ù–Æ
        document.addEventListener('contextmenu', e => e.preventDefault());
        
        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –†–ï–ö–û–†–î–û–í –ü–†–ò –ó–ê–ì–†–£–ó–ö–ï
        window.addEventListener('DOMContentLoaded', function() {
            updateHighScoreDisplay('aim', 'aimHighScore');
            updateHighScoreDisplay('tracking', 'trackingHighScore');
            updateHighScoreDisplay('reaction', 'reactionHighScore');
            updateHighScoreDisplay('trajectory', 'trajectoryHighScore');
            updateHighScoreDisplay('gymnastics', 'gymnasticsHighScore');
        });
    </script>
</body>
</html>
